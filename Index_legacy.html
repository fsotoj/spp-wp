<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subnational Politics Project (SPP)</title>
    <style>
        :root {
            --gray: #4D4D4D;
            --magenta: #E5007D;
            --purple: #722464;
            --orange: #FFA92A;
            --white: #ffffff;
            --transition-speed: 0.8s;
        }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            overflow: hidden; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: var(--white);
        }

        /* Dashboard Container */
        .dash-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
        }
        iframe { width: 100%; height: 100%; border: none; }

        /* Hero Layer */
        #hero-layer {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--white);
            z-index: 1000;
            transition: transform var(--transition-speed) cubic-bezier(0.8, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }

        #hero-layer.hidden { transform: translateY(-100%); }

        /* Top Bar */
        .top-nav {            
            padding: 30px 60px 15px ;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-spp { height: 60px; width: auto; }
        .nav-links { color: var(--orange); font-weight: bold; font-size: 1.1rem; }
        .nav-links span { margin-left: 25px; cursor: pointer; }

        /* Main Section */
        .hero-body {
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center; 
        }

        /* Resizing Main Column */
        .main-column {
            position: relative;
            width: 66.66%; 
            padding-left: 8%;
            padding-top: 5vh;    
            padding-bottom: 10vh; 
            z-index: 20;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly; 
            height: 70%; 
            max-height: 600px; 
        }

        .text-overlay h2 {
            font-size: clamp(1.1rem, 4.5vmin, 2.8rem);
            line-height: 1.3;
            color: #000;
            margin: 0;
            font-weight: 400;
        }

        .text-overlay strong { font-weight: 700; }

        /* Buttons Container */
        .footer-actions {
            display: flex;
            justify-content: flex-start; 
            gap: 30px;
        }

        .btn-spp {
            padding: 18px 45px;
            font-size: 1.1rem;
            font-weight: bold;
            background-color: var(--orange);
            color: var(--white);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, background 0.3s ease;
        }

        .btn-spp:hover { background-color: #f0951a; transform: translateY(-2px); }

        .btn-outline {
            background-color: transparent;
            color: var(--orange);
            border: 2px solid var(--orange);
            box-shadow: none;
        }

        /* Map Image (Second half of page) */
        .map-container {
            position: absolute;
            right: 0;
            bottom: 10%;
            width: 50%;
            height: 100%;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none; 
        }

        .map-container img {
            width: 100%;
            height: auto;
            max-height: 90vh; 
            object-fit: contain;
            animation: mapFloat 6s ease-in-out infinite;
        }

        @keyframes mapFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        /* Credit Footer */
        .credit-footer {
            position: absolute;
            bottom: 30px;
            left: 60px;
            font-size: 0.9rem;
            color: var(--gray);
            z-index: 1002;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }
        
        .credit-footer:hover {
            opacity: 1;
        }

        .credit-footer a {
            color: var(--magenta);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .credit-footer a:hover {
            color: var(--purple);
            text-decoration: underline;
        }

        /* --- DRAWER PULLER --- */
        .drawer-pull {
            position: absolute;
            bottom: -10%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--magenta);
            border-radius: 0 0 15px 15px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.4s ease;
            pointer-events: auto;
            z-index: 1001;
        }

        #hero-layer:not(.hidden) .drawer-pull { bottom: -50px; width: 100px; height: 50px; }
        #hero-layer.hidden .drawer-pull { bottom: -10px; width: 50px; height: 10px; opacity: 0.8; animation: pulse-hint 2s ease-in-out infinite; }
        #hero-layer.hidden .drawer-pull:hover { bottom: -40px; height: 40px; width: 100px; opacity: 1; background: var(--purple); animation: none; }

        @keyframes pulse-hint { 0%, 100% { height: 10px; } 50% { height: 16px; } }
        
        /* Arrow Symbol */
        .drawer-pull::before, .drawer-pull::after { content: ""; position: absolute; width: 14px; height: 3px; background-color: white; border-radius: 2px; transition: opacity 0.3s ease, transform 0.4s ease; opacity: 0; }
        #hero-layer:not(.hidden) .drawer-pull::before, #hero-layer:not(.hidden) .drawer-pull::after, .drawer-pull:hover::before, .drawer-pull:hover::after { opacity: 1; }
        #hero-layer.hidden .drawer-pull::before { transform: translateX(-5px) rotate(-35deg); }
        #hero-layer.hidden .drawer-pull::after { transform: translateX(5px) rotate(35deg); }
        #hero-layer:not(.hidden) .drawer-pull::before { transform: translateX(-5px) rotate(35deg); }
        #hero-layer:not(.hidden) .drawer-pull::after { transform: translateX(5px) rotate(-35deg); }

        /* --- RESPONSIVE UPDATES --- */
        @media (max-width: 1024px) {
            .top-nav {
                padding: 20px 25px;
            }
            .logo-spp { height: 45px; }

            .hero-body { 
                flex-direction: column; 
                overflow-y: auto; 
                display: flex; /* Maintain flex for content distribution */
                justify-content: flex-start;
                padding-bottom: 80px; /* Room for puller */
            }

            .main-column { 
                width: 100%; 
                padding: 20px 25px; 
                text-align: center; 
                height: auto; 
                max-height: none;
                box-sizing: border-box; /* Ensure padding doesn't push width over 100% */
                gap: 30px;
            }

            .text-overlay h2 {
                font-size: clamp(1.2rem, 5vw, 1.8rem);
            }

            .map-container { 
                position: relative; 
                width: 100%; 
                height: auto; 
                padding: 0 20px; 
                order: -1; /* Keep map at the top on small screens */
                bottom: 0;
            }
            
            .map-container img {
                max-height: 40vh;
            }

            .footer-actions { 
                flex-direction: column; 
                align-items: center; 
                width: 100%; 
                gap: 15px;
                justify-content: center;
            }

            .btn-spp { 
                width: 100%; 
                max-width: 300px;
                padding: 15px 30px;
            }

            .credit-footer { 
                position: relative; 
                bottom: 0; 
                left: 0; 
                text-align: center; 
                padding: 30px 25px; 
                width: 100%;
                box-sizing: border-box;
            }
        }

        /* Small screen adjustments to prevent overflow */
        @media (max-height: 700px) and (max-width: 1024px) {
            .main-column { padding-top: 10px; }
            .map-container img { max-height: 30vh; }
        }
    </style>
</head>
<body>

    <section id="hero-layer">
        <div class="top-nav">
            <img src="SPP.svg" class="logo-spp" alt="SPP Logo">
            <div class="nav-links">
                <span>About</span>
                <span>Contact</span>
            </div>
        </div>

        <div class="hero-body">
            <div class="map-container">
                <img src="map_web.svg" alt="SPP Map Visualization">
            </div>

            <div class="main-column">
                <div class="text-overlay">
                    <h2>
                        Systematic, transparent, and publicly accessible data on 
                        <strong>subnational political institutions and electoral outcomes</strong> 
                        across Latin America.
                    </h2>
                </div>

                <div class="footer-actions">
                    <button class="btn-spp" onclick="toggleHero()">Explore Data</button>
                    <button class="btn-spp btn-outline" onclick="triggerDownload()">Download Data</button>
                </div>
            </div>
        </div>

        <div class="credit-footer">
            Designed by <a href="https://www.linkedin.com/in/felipesotojorquera/" target="_blank" rel="noopener noreferrer">Felipe Soto Jorquera</a>
        </div>

        <div class="drawer-pull" onclick="toggleHero()"></div>
    </section>

    <div class="dash-container">
        <iframe src="https://fsotoj-spp-v3.hf.space"></iframe>
    </div>

    <script>
        function toggleHero() {
            const hero = document.getElementById('hero-layer');
            hero.classList.toggle('hidden');
        }

        function triggerDownload() {
            window.open('https://dataverse.harvard.edu/dataverse/spp', '_blank');
        }
    </script>
</body>
</html>